"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){if(!window.YT)var o={loading:0,loaded:0};if(!window.YTConfig)var r={host:"http://www.youtube.com"};var s,e,t,l,i;o.loading||(o.loading=1,function(){var e=[];o.ready=function(t){o.loaded?t():e.push(t)},window.onYTReady=function(){o.loaded=1;for(var t=0;t<e.length;t++)try{e[t]()}catch(t){}},o.setConfig=function(t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])};var t=document.createElement("script");t.type="text/javascript",t.id="www-widgetapi-script",t.src="https://s.ytimg.com/yts/jsbin/www-widgetapi-vfl_QvS8o/www-widgetapi.js",t.async=!0;var i=document.currentScript;if(i){var a=i.nonce||i.getAttribute("nonce");a&&t.setAttribute("nonce",a)}var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}()),window.IS_YOUTUBE_SCRIPT_READY=!1,window.onYouTubeIframeAPIReady=function(){IS_YOUTUBE_SCRIPT_READY=!0},window.isYoutubeIframeAPIReady=function(t){if(window.IS_YOUTUBE_SCRIPT_READY)return t();setTimeout(function(){return window.isYoutubeIframeAPIReady(t)},100)},window.YTPlayer=(s={videoPlay:function(){return{category:"VOD",action:"Play",label:"".concat(this.video.title," | ").concat(this.video.category," | ").concat(window.location.href),log:"GOOGLE ANALYTICS EVENT: Video Play! Player ID: ".concat(this.playerID," Video ID: ").concat(this.player.getVideoData().video_id)}},videoPause:function(){return{category:"VOD",action:"Pause",label:"".concat(this.video.title," | ").concat(this.video.category," | ").concat(window.location.href),log:"GOOGLE ANALYTICS EVENT: Video Pause! Player ID: ".concat(this.playerID," Video ID: ").concat(this.player.getVideoData().video_id)}},videoResume:function(){return{category:"VOD",action:"Resume",label:"".concat(this.video.title," | ").concat(this.video.category," | ").concat(window.location.href),log:"GOOGLE ANALYTICS EVENT: Video Resume! Player ID: ".concat(this.playerID," Video ID: ").concat(this.player.getVideoData().video_id)}},videoEnd:function(){return{category:"VOD",action:"Complete",label:"".concat(this.video.title," | ").concat(this.video.category," | ").concat(window.location.href),log:"GOOGLE ANALYTICS EVENT: Video End! Player ID: ".concat(this.playerID," Video ID: ").concat(this.player.getVideoData().video_id)}},videoProgress:function(){var t=Math.round(this.player.getCurrentTime());return{category:"VOD",action:"Played Time - ".concat(t," sec"),label:"".concat(this.video.title," | ").concat(this.video.category," | ").concat(window.location.href),log:"GOOGLE ANALYTICS EVENT: Video Progress! Player ID: ".concat(this.playerID," Video ID: ").concat(this.player.getVideoData().video_id," Duration: ").concat(t)}}},e={handle_video_start:function(){i.update_internal_state.apply(this,[this.VIDEO_READY_STATE]),this.player.setPlaybackQuality(l.get_mapped_quality(this.config.quality))},handle_video_end:function(){this.previousProgressTime=0}},t={on_ready:function(){this.player.setPlaybackQuality(l.get_mapped_quality(this.config.quality)),i.load_video.call(this),i.update_internal_state.apply(this,[this.READY_STATE]),i.start_progress_observer.call(this)},on_state_change:function(t){switch(t.data){case window.YT.PlayerState.ENDED:this.prevGAProgress=-1,e.handle_video_end.call(this),i.update_internal_state.apply(this,[this.END_STATE]);break;case window.YT.PlayerState.PLAYING:e.handle_video_start.call(this),i.update_internal_state.apply(this,[this.PLAY_STATE]);break;case window.YT.PlayerState.PAUSED:this.isPaused=!0,i.update_internal_state.apply(this,[this.PAUSE_STATE]);break;case window.YT.PlayerState.BUFFERING:i.update_internal_state.apply(this,[this.BUFFERING_STATE]);break;case window.YT.PlayerState.CUED:i.update_internal_state.apply(this,[this.CUE_STATE]),this.config.autoplay&&this.player.playVideo()}},on_quality_change:function(t){var e=l.get_unmapped_quality(t.data);l.log.apply(this,["EVENT: Video quality changed - ".concat(e)]),this.config.events.onQualityChange.apply(null,[{target:this},e])},on_rate_change:function(){l.log.apply(this,["EVENT: Video playback rate changed - ".concat(event.data)]),this.config.events.onRateChange.apply(null,[{target:this},event.data])},on_error:function(t){l.log.apply(this,[t]),this.config.events.onError.apply(null,[{target:this}])},on_api_change:function(){}},l={get_default_config:function(){var t={origin:l.get_origin(),referrer:l.get_origin(),controls:{onScreen:!0,keyboard:!0},autoplay:!1,loop:!1,disable_cc:!0,disable_annotions:!0,disable_fullscreen:!1,hide_logo:!0,start:0,end:0,lang:{cc:"en",interface:"en"},debug:!1,quality:"auto",color:"red",events:{onReady:function(){},onVideoReady:function(){},onPlay:function(){},onPause:function(){},onStop:function(){},onEnd:function(){},onProgress:function(){},onBuffering:function(){},onCued:function(){},onError:function(){},onQualityChange:function(){},onRateChange:function(){},onStateChange:function(){},onDestroy:function(){}}};return Object.assign({},t)},log:function(t){this.config.debug&&console.log(t)},get_origin:function(){return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},generate_player_id:function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=e.length,a=0;a<32;a++)t+=e.charAt(Math.floor(Math.random()*i));return t},get_mapped_quality:function(t){switch(t){case"highres":return"highres";case"1080p":return"hd1080";case"720p":return"hd720";case"480p":return"large";case"360p":return"medium";case"240p":return"small";case"144p":return"tiny";default:return"default"}},get_unmapped_quality:function(t){switch(t){case"highres":return"highres";case"hd1080":return"1080p";case"hd720":return"720p";case"large":return"480p";case"medium":return"360p";case"small":return"240p";case"tiny":return"144p";default:return"auto"}},send_event:function(t){if(window.ga){if(-1===Object.keys(s).indexOf(t))throw new Error("InvalidGAEvent: Specified GA event does not exist!");if("videoProgress"!==t){var e=s[t].call(this);ga("send","event",e.category,e.action,e.label),l.log.apply(this,[e.log])}else{var i=Math.round(this.player.getCurrentTime());if(this.previousProgressTime===i)return;if(this.previousProgressTime=i,-1!==[5,10,15,30,50,60].indexOf(i)){var a=s[t].call(this);ga("send","event",a.category,a.action,a.label),l.log.apply(this,[a.log])}else if(i%30==0){var n=s[t].call(this);ga("send","event",n.category,n.action,n.label),l.log.apply(this,[n.log])}}}}},i={validate_target:function(){return this.target&&this.target instanceof HTMLDivElement?this.target.getAttribute("data-youtube")&&"true"===this.target.getAttribute("data-youtube")?{status:!0,message:null}:{status:!1,message:"Target is not supported by library. Please verify data attributes are correct."}:{status:!1,message:"Target is null or target is not a valid Div element."}},load_config:function(){var t=this.target.getAttribute("data-youtube-width"),e=this.target.getAttribute("data-youtube-height");t&&(this.config.width=t),e&&(this.config.height=e);var i=this.target.getAttribute("data-youtube-id"),a=this.target.getAttribute("data-youtube-title"),n=this.target.getAttribute("data-youtube-category");if(!i||!a||!n)return!1;this.video={id:i,title:a,category:n};var o=this.target.getAttribute("data-youtube-debug");return this.config.debug="true"===o,!0},update_player_target:function(){if(this.target.innerHTML="",this.innerTarget=document.createElement("div"),this.innerTarget.id=this.playerID,!this.config.hasOwnProperty("width")&&!this.config.hasOwnProperty("height")){var t=parseInt(getComputedStyle(this.target).width),e=t/1.777778;this.innerTarget.style.width="".concat(t,"px"),this.innerTarget.style.height="".concat(e,"px")}this.target.appendChild(this.innerTarget)},update_player_config:function(){this.playerConfig={playerVars:{enablejsapi:1,autoplay:0,loop:0,rel:0,showinfo:0},events:{onReady:t.on_ready.bind(this),onStateChange:t.on_state_change.bind(this),onPlaybackQualityChange:t.on_quality_change.bind(this),onPlaybackRateChange:t.on_rate_change.bind(this),onError:t.on_error.bind(this),onApiChange:t.on_api_change.bind(this)}};Object.keys(this.config).forEach(function(t){if(-1===["enablejsapi","loop","rel","showinfo","debug","quality","send_usage","events","google_analytics"].indexOf(t))if("autoplay"!==t)if("referrer"!==t)if("disable_cc"!==t)if("disable_annotions"!==t)if("disable_fullscreen"!==t){if("hide_logo"!==t)return"lang"===t?(this.playerConfig.playerVars.cc_lang_pref=this.config.lang.cc,void(this.playerConfig.playerVars.hl=this.config.lang.interface)):"controls"===t?(this.playerConfig.playerVars.disablekb=this.config.controls.keyboard?0:1,void(this.playerConfig.playerVars.controls=this.config.controls.onScreen?1:0)):void("color"!==t?"start"!==t?"end"!==t?"width"!==t?"height"!==t||(this.playerConfig.height=this.config.height):this.playerConfig.width=this.config.width:this.playerConfig.playerVars.end=Math.round(this.config.end):this.playerConfig.playerVars.start=Math.round(this.config.start):this.playerConfig.playerVars.color=this.config.color);this.playerConfig.playerVars.modestbranding=this.config.hide_logo?1:0}else this.playerConfig.playerVars.fs=this.config.disable_fullscreen?0:1;else this.playerConfig.playerVars.iv_load_policy=this.config.disable_annotions?3:1;else this.playerConfig.playerVars.cc_load_policy=this.config.disable_cc?0:1;else this.playerConfig.widget_referrer=this.config.referrer;else this.playerConfig.playerVars.mute=this.config.autoplay?1:0}.bind(this))},update_player:function(){this.player=new window.YT.Player(this.innerTarget,this.playerConfig)},load_video:function(){this.player.cueVideoById({videoId:this.video.id,startSeconds:this.config.start,endSeconds:this.config.end,suggestedQuality:l.get_mapped_quality(this.config.quality)})},update_internal_state:function(t){switch(this.state=t,this.config.events.onStateChange.apply(null,[{target:this},this.state]),t){case this.READY_STATE:l.log.apply(this,["EVENT: Player Ready!"]),this.config.events.onReady.apply(null,[{target:this}]);break;case this.VIDEO_READY_STATE:l.log.apply(this,["EVENT: Video Ready!"]),this.config.events.onVideoReady.apply(null,[{target:this}]);break;case this.END_STATE:l.send_event.apply(this,["videoEnd"]),l.log.apply(this,["EVENT: Video Ended!"]),this.config.events.onEnd.apply(null,[{target:this}]);break;case this.PLAY_STATE:this.isPaused?l.send_event.apply(this,["videoResume"]):l.send_event.apply(this,["videoPlay"]),this.isPaused=!1,l.log.apply(this,["EVENT: Video Playing!"]),this.config.events.onPlay.apply(null,[{target:this}]);break;case this.PAUSE_STATE:l.send_event.apply(this,["videoPause"]),l.log.apply(this,["EVENT: Video Paused!"]),this.config.events.onPause.apply(null,[{target:this}]);break;case this.BUFFERING_STATE:l.log.apply(this,["EVENT: Video Buffering!"]),this.config.events.onBuffering.apply(null,[{target:this}]);break;case this.CUE_STATE:l.log.apply(this,["EVENT: Video Cued!"]),this.config.events.onCued.apply(null,[{target:this}])}},start_progress_observer:function(){var a=this,n=this,o=0;this.progressInterval=setInterval(function(){if(n.player.getPlayerState()===window.YT.PlayerState.PLAYING){var t=n.player.getCurrentTime();if(o!==t){var e=Math.round(100*t)/100,i=t/n.player.getDuration()*100;i=Math.round(100*i)/100,l.send_event.apply(a,["videoProgress"]),l.log.apply(n,["EVENT: Video progress - ".concat(e,"s ").concat(i,"%")]),n.config.events.onProgress.apply(null,[{target:n},t,i]),o=t}}},100)},init:function(){var t=this,e=i.validate_target.call(this);if(!e.status)throw new Error("InvalidTarget: ".concat(e.message));if(!i.load_config.call(this))throw new Error("InvalidConfig: Please verify id, title, category & channel are set.");i.update_player_target.call(this);window.isYoutubeIframeAPIReady(function(){i.update_player_config.call(t),i.update_player.call(t)}.bind(this))}},function t(e){_classCallCheck(this,t),this.target=e,this.innerTarget=null,this.video={},this.playerID=l.generate_player_id(),this.config=l.get_default_config(),this.playerConfig={},this.INITIALIZE_STATE=-1,this.READY_STATE=0,this.VIDEO_READY_STATE=1,this.PLAY_STATE=2,this.PAUSE_STATE=3,this.BUFFERING_STATE=4,this.CUE_STATE=5,this.END_STATE=6,this.state=this.INITIALIZE_STATE,this.isPaused=!1,this.previousProgressTime=0,i.init.call(this)}),document.addEventListener("DOMContentLoaded",function(){var t=document.querySelectorAll("[data-youtube=true]"),l=[];if(t&&t instanceof NodeList&&0<t.length)t.forEach(function(t){if(t.getAttribute("data-youtube-id")){var e=new YTPlayer(t);l.push(e)}});else{var c=document.getElementById("youtube-smart-widget-container"),d=c.dataset.property;if(c){$.ajax({type:"GET",url:"https://www.news18.com/get-data/NEWS18:youtube-recommend-widget/",dataType:"json",success:function(t){var e=function(t){return t["NEWS18:youtube-recommend-widget_".concat(d,"_priority")]}(t);if(e){var i=function(t){return t[t.length*Math.random()|0]}(e),a=i.headline,n=i.custom_field,o=new URL(window.location.href).pathname.split("/")[2]||"News",r=document.createElement("div");r.classList.add("youTubeVideoPlayer"),r.setAttribute("data",'"youtube-id": '),r.dataset.youtube=!0,r.dataset.youtubeId=n,r.dataset.youtubeTitle=a,r.dataset.youtubeCategory=o,c.appendChild(r);var s=new YTPlayer(r);l.push(s)}else console.log("No valid dataset found!")},error:function(t){console.log(t)}})}}})}();
//# sourceMappingURL=yt-player.min.js.map